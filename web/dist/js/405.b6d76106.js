"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[405],{405:function(s,e,t){t.r(e),t.d(e,{default:function(){return u}});var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"columns is-desktop is-centered"},[t("div",{staticClass:"column is-4"},[s.setup?[t("div",{staticClass:"field"},[t("p",{staticClass:"control has-icons-left has-icons-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.form.user_name,expression:"form.user_name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name",required:""},domProps:{value:s.form.user_name},on:{input:function(e){e.target.composing||s.$set(s.form,"user_name",e.target.value)}}}),s._m(0)])])]:s._e(),t("div",{staticClass:"field"},[t("p",{staticClass:"control has-icons-left has-icons-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.form.user_email,expression:"form.user_email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:s.form.user_email},on:{input:function(e){e.target.composing||s.$set(s.form,"user_email",e.target.value)}}}),s._m(1)])]),t("div",{staticClass:"field"},[t("p",{staticClass:"control has-icons-left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.form.user_password,expression:"form.user_password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:s.form.user_password},on:{input:function(e){e.target.composing||s.$set(s.form,"user_password",e.target.value)}}}),s._m(2)])]),t("div",{staticClass:"field"},[t("p",{staticClass:"control"},[s.setup?[t("b-button",{attrs:{type:"is-danger is-light",disabled:s.form.button_disabled},on:{click:s.setupEvent}},[s._v("Install Walrus")])]:[t("b-button",{attrs:{type:"submit is-danger is-light",disabled:s.form.button_disabled},on:{click:s.loginEvent}},[s._v("Login")])]],2)])],2)])},i=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-user"})])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-envelope"})])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-lock"})])}],r={name:"LoginPage",data(){return{setup:!1,form:{user_password:"",user_email:"",user_name:"",button_disabled:!1},loader:{isFullPage:!0,ref:null}}},methods:{loading(){this.loader.ref=this.$buefy.loading.open({container:this.loader.isFullPage?null:this.$refs.element.$el})},loginEvent(){this.form.button_disabled=!0,this.$store.dispatch("auth/authAction",{email:this.form.user_email,password:this.form.user_password}).then((s=>{this.$buefy.toast.open({message:"User logged in successfully",type:"is-success"}),localStorage.setItem("user_api_key",s.data.apiKey),localStorage.setItem("user_email",s.data.email),localStorage.setItem("user_id",s.data.id),localStorage.setItem("user_name",s.data.name),this.$router.push("/")}),(s=>{s.response.data.errorMessage?this.$buefy.toast.open({message:s.response.data.errorMessage,type:"is-danger"}):this.$buefy.toast.open({message:"Error status code: "+s.response.status,type:"is-danger"}),this.form.button_disabled=!1}))},setupEvent(){this.form.button_disabled=!0,this.$store.dispatch("auth/setupAction",{name:this.form.user_name,email:this.form.user_email,password:this.form.user_password}).then((()=>{this.$buefy.toast.open({message:"Walrus installed successfully",type:"is-success"}),this.$router.push("/")}),(s=>{s.response.data.errorMessage?this.$buefy.toast.open({message:s.response.data.errorMessage,type:"is-danger is-light"}):this.$buefy.toast.open({message:"Error status code: "+s.response.status,type:"is-danger is-light"}),this.form.button_disabled=!1}))}},mounted(){this.loading(),this.$store.dispatch("auth/fetchInfo").then((()=>{let s=this.$store.getters["auth/getTowerInfo"];s.setupStatus||(this.setup=!0,this.$buefy.toast.open({message:"Walrus not installed yet, Please setup the application!",type:"is-info is-light"})),this.loader.ref.close()}),(s=>{this.$buefy.toast.open({message:s.response.data.errorMessage,type:"is-danger is-light"}),this.loader.ref.close()}))}},o=r,l=t(1),n=(0,l.Z)(o,a,i,!1,null,null,null),u=n.exports}}]);
//# sourceMappingURL=405.b6d76106.js.map